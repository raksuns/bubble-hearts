/**
 * @ProjectName bubble-hearts
 * @Version 1.0.0
 * @Author lixinliang(https://github.com/lixinliang)
 * @Update 2022-01-23 4:51:46 pm
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.BubbleHearts=e()}(this,function(){"use strict";function t(t,n,r){var i=function(t){return Math.max(.5+.5*t)},o=n.width/2+e.uniformDiscrete(-0,0),u=(n.width-Math.sqrt(Math.pow(t.width,2)+Math.pow(t.height,2)))/2-0,a=e.uniformDiscrete(.1*u,u)*(e.uniformDiscrete(0,1)?1:-1),c=e.uniformDiscrete(250,800),f=function(t){return o+a*Math.sin(c*(1-t)*Math.PI/180)},h=function(e){return(n.height-t.height/2)*e},s=e.uniformDiscrete(84,98)/100,l=function(t){return t>s?1:1-((s-t)/s).toFixed(2)};return function(e){if(!(e>=0))return!0;r.save();var n=i(e),o=f(e),u=h(e);r.translate(o,u),r.scale(n,n),r.globalAlpha=l(e),r.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),r.restore()}}var e=function(t){var e=t,n=Math.floor,r=Math.random;return t.uniform=function(t,e){return t+(e-t)*r()},t.uniformDiscrete=function(t,r){return t+n((r-t+1)*e.uniform(0,1))},t}({}),n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)};return function(){function o(){n(this,o);var t=this.canvas=document.createElement("canvas"),e=this.context=t.getContext("2d"),r=this._children=[];i(function n(){i(n),e.clearRect(0,0,t.width,t.height);for(var o=0,u=r.length;o<u;){var a=r[o];a.render.call(null,(a.timestamp+a.duration-new Date)/a.duration)?(r.splice(o,1),u--):o++}})}return r(o,[{key:"bubble",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.uniformDiscrete(2e3,4e3),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t(n,this.canvas,this.context);return this._children.push({render:i,duration:r,timestamp:+new Date}),this}}]),o}()});
